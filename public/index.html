<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover, orientation=portrait">
  <title>Here.news</title>
  <meta property="og:image" content="" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="" />
  <meta property="og:description" content="" />
  <meta property="og:url" content="" />
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Font Awesome for upvote icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link rel="stylesheet" href="/static/css/site.css">
  
  <!-- Libraries for binary websocket protocol -->
  <script src="https://cdn.jsdelivr.net/npm/@msgpack/msgpack@2.8.0/dist.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
  
  <!-- Dynamic Configuration - loaded from backend with dynamic hostname -->
  <script>
    // Determine the API server URL dynamically based on current hostname
    const protocol = window.location.protocol;
    const hostname = window.location.hostname;
    const isDevelopment = window.location.port === '3000';
    
    // Use the same logic as in config.js for API URL
    let apiBaseUrl;
    if (isDevelopment && (hostname === 'localhost' || /^192\.168\./.test(hostname))) {
      apiBaseUrl = `http://${hostname}:8282`;
    } else {
      apiBaseUrl = `${protocol}//${hostname}:8282`;
    }
    
    // Create and insert the script element
    const configScript = document.createElement('script');
    configScript.src = `${apiBaseUrl}/config.js`;
    configScript.async = false; // We want this to load synchronously before the app
    document.head.appendChild(configScript);
  </script>
</head>
<body class="fixed-layout">
  <div id="root"></div>
  <!-- Bootstrap JS, Popper.js, and jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
</body>
</html>
